# Проект 2: Лабиринты

## Описание

Проект состоит из реализации консольной программы для генерации лабиринтов и поиска пути в них. Программа должна быть способна генерировать лабиринты различной сложности и размеров, а также предоставлять один или несколько методов поиска пути от заданной точки А (начала) к точке Б (конца). Интерфейс приложения должен быть простым и понятным, с возможностью отрисовки в консоли лабиринта и найденного пути.

## Функциональные требования

- Реализация 2-x алгоритмов генерации лабиринта методом поиска в глубину(DFS) и алгоритм Прима.
- Реализация 2-х алгоритмов для поиска пути из заданной начальной точки **O** в конечную точку **X**: А* (A-star) и Дейкстры.
- Ввод конфигурации лабиринта, начальной и конечной точки через CLI
- Отображение пути через лабиринт при его наличии в консоль.
- Сохранение решения в файл.

## Нефункциональные требования

- Код должен быть написан ясно и структурировано в соответствии с требованиями, указанными в разделе "Требования к ДЗ" информационного блока.
- Программа должна иметь текстовый интерфейс.
- Наличие документации по использованию, а также по алгоритмам генерации и решения лабиринта.
- Должны быть покрыты основные тестовые сценарии: валидация, генерация и решение лабиринтов.

## Тестирование Black Box

В проекте используется тестирование Black Box - функциональное тестирование поведения программы.
Для запуска таких тестов локально, прочитайте [инструкцию](tests/README.md).

Основные тестовые сценарии:
- [Проверка вывода справки](tests/cases/1_check_help) - проверяется полнота справки при использовании флага *--help*.
- [Проверка валидации](tests/cases/2_check_point_validation) - проверяется корректность валидации значения точки *start* в команде *solve*.
- [Генерация лабиринта](tests/cases/3_check_maze_generation) - проверяется сохранение вырожденного лабиринта 1x1 в файл.
- [Решение лабиринта](tests/cases/4_check_maze_solving) - проверяется корректное решение заранее заданного лабиринта алгоритмом *A-star* и сохранение решения в файл.

Тестовые сценарии могут быть изменены студентом без ухудшения качества, добавление сценариев приветствуется.

## Описание входных и выходных данных

### Ввод/Вывод

#### Генерация лабиринта

- Выбор алгоритма генерации лабиринта.
- Параметры размера лабиринта (ширина, высота).
- Опционально имя файла для сохранения, если имя файла не задано, то лабиринт выводится в консоль.

#### Решение лабиринта

- Выбор алгоритма решения лабиринта.
- Начальная и конечная точки маршрута в формате: `x,y`.
- Файл с описанием лабиринта
- Опционально имя файла для сохранения результата, если имя файла не задано, то решение выводится в консоль.

### Примеры команд

```bash
java -jar app.jar generate --algorithm=dfs --width=10 --height=10 --output=maze1.txt
java -jar app.jar generate --algorithm=prim --width=10 --height=10 --output=maze2.txt
java -jar app.jar solve --algorithm=astar --file=maze1.txt --start=1,1 --end=9,9 --output=solution_maze1.txt
java -jar app.jar solve --algorithm=dijkstra --file=maze2.txt --start=0,0 --end=9,9 --output=solution_maze2.txt
```

### Формат файла с лабиринтом

*Обозначения*:
**O** - начальная точка,
**X** - конечная точка,
**<пробел>** - пустое пространство(проходимая ячейка),
**.** - точка маршрута,
**#** - стена(непроходимая ячейка).

Пример:

```
#####################
#O#   #  ...........#
#.### # #.#########.#
#...#   #.#       #.#
###.#####.# ### # #.#
#...#...#.#   # # #.#
#.###.#.#.### # # #.#
#.#  .#.#...# # # #.#
#.###.#.###.# # ###.#
#.....#.....# #  X..#
#####################
```

## Инструкции по реализации

- Изучите и реализуйте несколько алгоритмов генерации лабиринтов, алгоритмы Прима и DFS.
- Реализуйте алгоритм поиска пути поиск Дейкстры и А* (A-star).
- Проверьте работоспособность программы с разными параметрами и напишите тесты.
- Разработайте способ отображения лабиринтов и путей в них, используя символьную графику. Можно использовать простые символы (#, *, |, _), можно более сложные (unicode).
- При реализации рекомендуется использовать заранее определенные классы:

  ```
  Solver
  Generator
  CellType
  Maze
  Path
  Point
  ```

## Тестирование

- Проверьте, способны ли алгоритмы решения найти путь из заранее известных лабиринтов.
- Удостоверьтесь, что лабиринты корректно отображаются в консоли.
- Напишите тесты на устойчивость к ошибкам в случае неправильных входных данных.
- Проверьте, что алгоритмы решения способны находить оптимальный путь в лабиринтах с несколькими возможными маршрутами.
- Убедитесь, что лабиринты корректно отображаются в консоли, включая начальную и конечную точки.
- Напишите тесты на обработку ошибок: некорректные координаты, отрицательные размеры, отсутствующие файлы и т.д.

## Ограничения и советы

- Ограничение: алгоритмы требуется реализовать самостоятельно.
- Ограничение: сосредоточьтесь на консольном интерфейсе. Вся визуализация лабиринта и пути должна выполняться с помощью стандартного вывода в консоль, без использования графических интерфейсов.
- Совет: не усложняйте. Постарайтесь сделать интерфейс пользователя интуитивно понятным, минимизируя количество необходимых шагов для генерации и решения лабиринта.
- Совет: документируйте, что важно. Нужно ясное и конкретное документирование кода, чтобы облегчить его понимание.
- Совет: пишите обобщенный код. У всех генераторов и решателей лабиринта единый контракт.

## Дополнительные материалы

- О генерации лабиринтов: https://habr.com/ru/articles/445378/
- Поиск в глубину: https://ru.algorithmica.org/cs/graph-traversals
- Поиск в ширину: https://ru.algorithmica.org/cs/shortest-paths
- Unicode-символы для лабиринта: https://www.vidarholen.net/cgi-bin/labyrinth

# Сроки и процедура сдачи ДЗ

На реализацию проекта отводится весь модуль. По завершению модуля ассистент имеет полное право выставить 0 баллов за
работу, если она не была предоставлена в срок.

Доработка ДЗ по замечаниям возможна до дедлайна. Доработка ДЗ после дедлайна согласуется с ассистентом, после доработки
количество баллов может быть увеличено.

В ответ на задание нужно прислать кликабельную ссылку на репозиторий.
Больше подробностей по сдаче ДЗ можно найти в разделе "Информационный блок".

При создании `Merge request` для сдачи ДЗ на проверку - воспользуйся [шаблоном](./.gitlab/merge_request_templates/requirements.md)
для заполнения описания MR: [как применить шаблон](./docs/mr-template.png).

## Критерии оценки

За задание можно получить 100 баллов.

- +10 бонусов за реализацию дополнительных алгоритмов генерации и решения лабиринтов, различных типы поверхностей лабиринта и их учёте при построении маршрута, например
  - ухудшающие поверхности: болота, песок и т.п.
  - улучшающие поверхности: монетки, хорошее покрытие и т.п.
- +10 бонусов за реализацию псевдографики с использованием unicode-символов, должна включаться отдельным флагом.

Дополнительно можно получить личные бонусные баллы на усмотрение ассистента.

Детали о снятии обычных и начислении бонусных баллов можно найти
в разделе "Информационный блок" (см. [1.7 Баллы и оценка за курс](https://my.tbank.ru/edu/educate/course/9f925592-6abb-40a2-ba59-70fe229094aa/unit/c4c883bd-fdf5-4165-9762-b19dc7bc6770)).

## Частые вопросы и проблемы

### Не запускается собранный jar файл
Возникают ошибки типа
- `no main manifest attribute, in target/project-1.0.jar`
- не найдены какие либо классы: `java.lang.NoClassDefFoundError: picocli/CommandLine`

**Решение**

Использовать для сборки fat jar, содержащий все необходимые зависимости:
```bash
$ ./mvnw clean package shade:shade
```
А для запуска
```bash
$ java -cp .target/project-1.0.jar academy.Application
```
Альтернативный вариант, использовать [assembly plugin](https://maven.apache.org/plugins/maven-assembly-plugin/)

### При запуске black-box тестов возникает ошибка несоответствия вывода ожидаемому результату, хотя визуально все выглядит одинаково.
Это может происходить из-за различия символа перевода строки в Windows и Linux-подобных системах. 

В Windows используется `\r\n`, а в Linux `\n` Тесты ореентируются на Linux-стиль.

**Решение**

В Java можно переопредллить системный символ перевода строки, передав при запуске параметр `-Dline.separator=$'\n'` или вызвав `System.setProperty("line.separator", "\n");`.
